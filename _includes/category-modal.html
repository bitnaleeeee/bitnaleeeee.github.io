<!doctype html>
<html lang="ko">

<head>
    <title>구독몰</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <link rel="stylesheet" href="../css/all.css?v001" />
    <script src="../js/jquery-1.12.4.min.js"></script>
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> -->

    <!--공통 js-->
    <script src="../js/ui.js"></script>

    <!-- 상품 Swiper JS -->
    <script src="../js/swiper.min.js"></script>
    <style>
        .sub-text {
            font-size: 15px;
            font-weight: 700;
        }

        /* 알림창 배경 스타일 */
        .custom-alert-background {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        /* 알림창 스타일 */
        .custom-alert {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .custom-alert-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .custom-alert-message {
            font-size: 16px;
            margin-bottom: 20px;
        }

        .custom-alert-button {
            font-size: 18px;
            padding: 10px 20px;
            background-color: lightgray;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <!--pc레이아웃-->
    <?php include "../_inc/pc_layout.php"; ?>
    <!--//pc레이아웃-->

    <!--상단영역 -->
    <header>
        <div class="sub_header2 fixed"> <a class="back2" href="javascript:window.history.back();"></a>
            <div class="sub_page_tit2">구독몰 회원 가입</div>
            <div class="quickicon" onClick="location.href='login.php'"><i class="uil uil-estate"></i></div>
        </div>
    </header>
    <!--//상단영역 -->

    <div class="sub_all_bg2">
        <div class="sub_inbox">
            <!---------------------------->
            <form id="frmJoin" class="js-validate w-md-75 w-lg-50 mx-md-auto" method="POST">
                <div class="sub_contbox7">
                    <div class="info_input_box">
                        <div class="data_title6">아이디 </div>
                        <div class="info_input2 mb_10">
                            <input id="userId" name="userId" type="text" class="id_bg" oninput="handleOnInput(this);">
                            <div id="oBtnIdCheck" class="idcheckbtn" style="z-index:999">아이디 확인 </div>
                        </div>
                        <span class="join_txt1">6글자 이상 영문 소문자, 숫자만 가능</span>
                    </div>
                    <!------//------->
                    <div class="info_input_box">
                        <div class="data_title6">비밀번호 </div>
                        <div class="info_input2">
                            <input id="password" name="password" type="password" placeholder="">
                        </div>
                    </div>
                    <!------//------->
                    <div class="info_input_box">
                        <div class="data_title6">비밀번호 확인</div>
                        <div class="info_input2">
                            <input id="passwordChk" type="password" placeholder="" value="">
                        </div>
                    </div>
                    <!------//------->
                    <div class="info_input_box">
                        <div class="data_title6">이름 </div>
                        <div class="info_input2">
                            <input id="name" name="name" type="text" placeholder="">
                        </div>
                    </div>

                    <!------//------->
                    <div class="info_input_box">
                        <div class="data_title6">이메일 </div>
                        <div class="info_input mb_10">
                            <input id="email" name="email" type="text" class="e_st" placeholder="이메일" oninput="handleOnInputE(this);">
                            <div class="emailbtn" style="z-index:999;" id="oBtnEmailCheck">이메일 중복확인</div>
                        </div>
                    </div>
                    <!------//------->
                    <div class="info_input_box">
                        <div class="data_title6">전화번호 </div>
                        <div class="info_input2 mb_10">
                            <input id="phone" name="phone" type="text" placeholder="01012345678">
                        </div>
                        <input id="agree2" type="checkbox" name="checkbox2" class="checkbox">
                        <label for="agree2"><span class="sub-text">(필수)</span> SMS을 통한 상품/이벤트 정보 수신에 동의합니다. </label>
                    </div>
                    <!------//------->
                    <div class="info_input_box">
                        <div class="data_title6">주소 </div>
                        <div class="info_input">
                            <input id="zipcode" name="zipcode" type="text" placeholder="" class="w_st" readonly>
                            <div class="addressbtn" style="z-index:999;" onClick="sample3_execDaumPostcode()">우편번호 </div>
                        </div>
                        <div class="info_input mt_10">
                            <input id="addr1" name="addr1" type="text" placeholder="" class="w_st2" readonly>
                        </div>
                        <div id="wrap" class="mb-3" style="display:none;border:1px solid;width:350px;height:300px;z-index:999;margin:5px 0;position:absolute"> <img src="//t1.daumcdn.net/postcode/resource/images/close.png" id="btnFoldWrap" style="cursor:pointer;position:absolute;right:0px;top:-1px;z-index:999" onClick="foldDaumPostcode()" alt="접기 버튼"> </div>
                        <div class="info_input2 mt_10">
                            <input id="addr2" name="addr2" style="z-index:888;" type="text" placeholder="상세주소">
                        </div>

                        <div class="custom-alert-background" id="customAlertBackground">
                            <div class="custom-alert">
                                <div class="custom-alert-title">회원가입 완료</div>
                                <div class="custom-alert-message">링크 공유하여 용돈도 벌고<br>정기구독으로 할인 혜택도 누려보세요</div>
                                <button class="custom-alert-button" id="customAlertButton">확인</button>
                            </div>
                        </div>

                    </div>
                    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
                    <script>
                        // 우편번호 찾기 찾기 화면을 넣을 element
                        var element_wrap = document.getElementById('wrap');

                        function foldDaumPostcode() {
                            // iframe을 넣은 element를 안보이게 한다.
                            element_wrap.style.display = 'none';
                        }

                        function sample3_execDaumPostcode() {
                            // 현재 scroll 위치를 저장해놓는다.
                            var currentScroll = Math.max(document.body.scrollTop, document.documentElement.scrollTop);
                            new daum.Postcode({
                                oncomplete: function (data) {
                                    // 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분.

                                    // 각 주소의 노출 규칙에 따라 주소를 조합한다.
                                    // 내려오는 변수가 값이 없는 경우엔 공백('')값을 가지므로, 이를 참고하여 분기 한다.
                                    var addr = ''; // 주소 변수
                                    var extraAddr = ''; // 참고항목 변수

                                    //사용자가 선택한 주소 타입에 따라 해당 주소 값을 가져온다.
                                    if (data.userSelectedType === 'R') { // 사용자가 도로명 주소를 선택했을 경우
                                        addr = data.roadAddress;
                                    } else { // 사용자가 지번 주소를 선택했을 경우(J)
                                        addr = data.jibunAddress;
                                    }

                                    // 사용자가 선택한 주소가 도로명 타입일때 참고항목을 조합한다.
                                    if (data.userSelectedType === 'R') {
                                        // 법정동명이 있을 경우 추가한다. (법정리는 제외)
                                        // 법정동의 경우 마지막 문자가 "동/로/가"로 끝난다.
                                        if (data.bname !== '' && /[동|로|가]$/g.test(data.bname)) {
                                            extraAddr += data.bname;
                                        }
                                        // 건물명이 있고, 공동주택일 경우 추가한다.
                                        if (data.buildingName !== '' && data.apartment === 'Y') {
                                            extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                                        }
                                        // 표시할 참고항목이 있을 경우, 괄호까지 추가한 최종 문자열을 만든다.
                                        if (extraAddr !== '') {
                                            extraAddr = ' (' + extraAddr + ')';
                                        }
                                        // 조합된 참고항목을 해당 필드에 넣는다.
                                        document.getElementById("addr1").value = addr + extraAddr;
                                    } else {
                                        document.getElementById("addr1").value = addr;
                                    }

                                    // 우편번호와 주소 정보를 해당 필드에 넣는다.
                                    document.getElementById('zipcode').value = data.zonecode;

                                    // 커서를 상세주소 필드로 이동한다.
                                    document.getElementById("addr2").focus();

                                    // iframe을 넣은 element를 안보이게 한다.
                                    element_wrap.style.display = 'none';

                                    // 우편번호 찾기 화면이 보이기 이전으로 scroll 위치를 되돌린다.
                                    document.body.scrollTop = currentScroll;
                                },
                                onresize: function (size) {
                                    element_wrap.style.height = size.height + 'px';
                                },
                                width: '100%',
                                height: '100%'
                            }).embed(element_wrap);

                            // iframe을 넣은 element를 보이게 한다.
                            element_wrap.style.display = 'block';
                        }

                        // 알림창 표시 함수
                        function showCustomAlert() {
                            document.getElementById('customAlertBackground').style.display = 'block';
                        }

                        // 알림창 확인 버튼 클릭 이벤트 리스너
                        document.getElementById('customAlertButton').addEventListener('click', function () {
                            document.getElementById('customAlertBackground').style.display = 'none';
                            location.href = "/front/main/index.php";
                        });

                        $(document).ready(function () {
                            $('#oBtnIdCheck').click(function () {
                                var userId = $('#userId').val().trim();
                                if (userId === '') {
                                    alert('아이디를 입력해 주세요.');
                                    return;
                                }

                                // 아이디 유효성 검사 (예: 6자 이상, 영문 소문자와 숫자만 허용)
                                var idPattern = /^[a-z0-9]{6,}$/;
                                if (!idPattern.test(userId)) {
                                    alert('아이디는 6자 이상 영문 소문자와 숫자만 가능합니다.');
                                    return;
                                }

                                // 서버에 아이디 중복 확인 요청
                                $.ajax({
                                    url: '/server/check_id.php',
                                    method: 'POST',
                                    data: { userId: userId },
                                    success: function (response) {
                                        if (response === 'OK') {
                                            alert('사용 가능한 아이디입니다.');
                                        } else {
                                            alert('이미 사용 중인 아이디입니다.');
                                        }
                                    },
                                    error: function () {
                                        alert('아이디 확인 중 오류가 발생했습니다.');
                                    }
                                });
                            });

                            $('#oBtnEmailCheck').click(function () {
                                var email = $('#email').val().trim();
                                if (email === '') {
                                    alert('이메일을 입력해 주세요.');
                                    return;
                                }

                                // 이메일 유효성 검사
                                var emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
                                if (!emailPattern.test(email)) {
                                    alert('유효한 이메일 주소를 입력해 주세요.');
                                    return;
                                }

                                // 서버에 이메일 중복 확인 요청
                                $.ajax({
                                    url: '/server/check_email.php',
                                    method: 'POST',
                                    data: { email: email },
                                    success: function (response) {
                                        if (response === 'OK') {
                                            alert('사용 가능한 이메일입니다.');
                                        } else {
                                            alert('이미 사용 중인 이메일입니다.');
                                        }
                                    },
                                    error: function () {
                                        alert('이메일 확인 중 오류가 발생했습니다.');
                                    }
                                });
                            });

                            $('#frmJoin').submit(function (event) {
                                event.preventDefault(); // 폼의 기본 제출 방지

                                var userId = $('#userId').val().trim();
                                var password = $('#password').val().trim();
                                var passwordChk = $('#passwordChk').val().trim();
                                var name = $('#name').val().trim();
                                var email = $('#email').val().trim();
                                var phone = $('#phone').val().trim();
                                var zipcode = $('#zipcode').val().trim();
                                var addr1 = $('#addr1').val().trim();
                                var addr2 = $('#addr2').val().trim();

                                // 필수 입력 필드 확인
                                if (!userId || !password || !passwordChk || !name || !email || !phone || !zipcode || !addr1 || !addr2) {
                                    alert('모든 필수 입력 필드를 채워 주세요.');
                                    return;
                                }

                                // 비밀번호 일치 여부 확인
                                if (password !== passwordChk) {
                                    alert('비밀번호가 일치하지 않습니다.');
                                    return;
                                }

                                // 서버에 회원가입 요청
                                $.ajax({
                                    url: '/server/register.php',
                                    method: 'POST',
                                    data: {
                                        userId: userId,
                                        password: password,
                                        name: name,
                                        email: email,
                                        phone: phone,
                                        zipcode: zipcode,
                                        addr1: addr1,
                                        addr2: addr2
                                    },
                                    success: function (response) {
                                        if (response === 'OK') {
                                            // 회원가입 성공 시 알림창 표시
                                            showCustomAlert();
                                        } else {
                                            alert('회원가입 중 오류가 발생했습니다. 다시 시도해 주세요.');
                                        }
                                    },
                                    error: function () {
                                        alert('회원가입 중 오류가 발생했습니다. 다시 시도해 주세요.');
                                    }
                                });
                            });
                        });
                    </script>
                </div>
                <!---------------------------->
                <div class="mtb_30"><a href="javascript:$('#frmJoin').submit();" class="joinbt">가입하기</a></div>
            </form>
        </div>
    </div>
</body>

</html>




원래 코드


<!doctype html>
<html  lang="ko">
<head>
<title>구독몰</title>
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta charset="utf-8">
<link rel="stylesheet" href="../css/all.css?v001"/>
<script src="../js/jquery-1.12.4.min.js"></script>
<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> -->

<!--공통 js-->
<script src="../js/ui.js" ></script>

<!-- 상품 Swiper JS -->
<script src="../js/swiper.min.js"></script>

<style>
        .sub-text {
            font-size: 15px;
            font-weight: 700;
        }


        </style>
</head>
<body>
<!--pc레이아웃-->
<?php include "../_inc/pc_layout.php"; ?>
<!--//pc레이아웃--> 

<!--상단영역 -->
<header>
	<div class="sub_header2 fixed"> <a class="back2"  href="javascript:window.history.back();"></a>
		<div class="sub_page_tit2">구독몰 회원 가입</div>
		<div class="quickicon" onClick="location.href='login.php'"><i class="uil uil-estate"></i></div>
	</div>
</header>
<!--//상단영역 -->

<div class="sub_all_bg2">
	<div class="sub_inbox"> 
		<!---------------------------->
		<form id="frmJoin" class="js-validate w-md-75 w-lg-50 mx-md-auto" method="POST" >
			<div class="sub_contbox7">
				<div class="info_input_box">
					<div class="data_title6">아이디 </div>
					<div class="info_input2 mb_10">
						<input id="userId" name="userId" type="text" class="id_bg" oninput="handleOnInput(this);">
						<div id="oBtnIdCheck" class="idcheckbtn" style="z-index:999">아이디 확인 </div>
					</div>
					<span class="join_txt1">6글자 이상 영문 소문자, 숫자만 가능</span> </div>
				<!------//------->
				<div class="info_input_box">
					<div class="data_title6">비밀번호 </div>
					<div class="info_input2">
						<input id="password" name="password" type="password"  placeholder="" >
					</div>
				</div>
				<!------//------->
				<div class="info_input_box">
					<div class="data_title6">비밀번호 확인</div>
					<div class="info_input2">
						<input id="passwordChk" type="password"  placeholder=""  value="" >
					</div>
				</div>
				<!------//------->
				<div class="info_input_box">
					<div class="data_title6">이름 </div>
					<div class="info_input2">
						<input id="name" name="name" type="text"  placeholder=""  >
					</div>
				</div>

				<!------//------->
				<div class="info_input_box">
					<div class="data_title6">이메일 </div>
					<div class="info_input mb_10"	>
						<input id="email" name="email" type="text" class="e_st" placeholder="이메일" oninput="handleOnInputE(this);" >
						<div class="emailbtn"  style="z-index:999;" id="oBtnEmailCheck">이메일 중복확인</div>
					</div>
				</div>
				<!------//------->
				<div class="info_input_box">
					<div class="data_title6">전화번호 </div>
					<div class="info_input2 mb_10"	>
						<input id="phone" name="phone" type="text"  placeholder="01012345678" >
					</div>
					<input id="agree2" type="checkbox" name="checkbox2" class="checkbox"  >
					<label for="agree2">SMS을 통한 상품/이벤트 정보 수신에 동의합니다. </label>
				</div>
				<!------//------->
				<div class="info_input_box">
					<div class="data_title6">주소 </div>
					<div class="info_input">
						<input id="zipcode" name="zipcode" type="text"  placeholder=""  class="w_st" readonly>
						<div class="addressbtn" style="z-index:999;" onClick="sample3_execDaumPostcode()">우편번호 </div>
					</div>
					<div class="info_input mt_10">
						<input id="addr1" name="addr1" type="text"  placeholder=""  class="w_st2" readonly>
					</div>
					<div id="wrap" class="mb-3" style="display:none;border:1px solid;width:350px;height:300px;z-index:999;margin:5px 0;position:absolute"> <img src="//t1.daumcdn.net/postcode/resource/images/close.png" id="btnFoldWrap" style="cursor:pointer;position:absolute;right:0px;top:-1px;z-index:999" onClick="foldDaumPostcode()" alt="접기 버튼"> </div>
					<div class="info_input2 mt_10"	>
						<input id="addr2" name="addr2" style="z-index:888;" type="text"  placeholder="상세주소" >
					</div>
				</div>
				<script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script> 
				<script>
            // 우편번호 찾기 찾기 화면을 넣을 element
            var element_wrap = document.getElementById('wrap');

            function foldDaumPostcode() {
              // iframe을 넣은 element를 안보이게 한다.
              element_wrap.style.display = 'none';
            }

            function sample3_execDaumPostcode() {
              // 현재 scroll 위치를 저장해놓는다.
              var currentScroll = Math.max(document.body.scrollTop, document.documentElement.scrollTop);
              new daum.Postcode({
                oncomplete: function (data) {
                  // 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분.

                  // 각 주소의 노출 규칙에 따라 주소를 조합한다.
                  // 내려오는 변수가 값이 없는 경우엔 공백('')값을 가지므로, 이를 참고하여 분기 한다.
                  var addr = ''; // 주소 변수
                  var extraAddr = ''; // 참고항목 변수

                  //사용자가 선택한 주소 타입에 따라 해당 주소 값을 가져온다.
                  if (data.userSelectedType === 'R') { // 사용자가 도로명 주소를 선택했을 경우
                    addr = data.roadAddress;
                  } else { // 사용자가 지번 주소를 선택했을 경우(J)
                    addr = data.jibunAddress;
                  }

                  // 사용자가 선택한 주소가 도로명 타입일때 참고항목을 조합한다.
                  if (data.userSelectedType === 'R') {
                    // 법정동명이 있을 경우 추가한다. (법정리는 제외)
                    // 법정동의 경우 마지막 문자가 "동/로/가"로 끝난다.
                    if (data.bname !== '' && /[동|로|가]$/g.test(data.bname)) {
                      extraAddr += data.bname;
                    }
                    // 건물명이 있고, 공동주택일 경우 추가한다.
                    if (data.buildingName !== '' && data.apartment === 'Y') {
                      extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                    }
                    // 표시할 참고항목이 있을 경우, 괄호까지 추가한 최종 문자열을 만든다.
                    if (extraAddr !== '') {
                      extraAddr = ' (' + extraAddr + ')';
                    }
                    // 조합된 참고항목을 해당 필드에 넣는다.
                    console.debug("extraAddr", extraAddr);
                    //document.getElementById("sample3_extraAddress").value = extraAddr;

                  } else {
                    //document.getElementById("sample3_extraAddress").value = '';
                  }

                  // 우편번호와 주소 정보를 해당 필드에 넣는다.
                  document.getElementById('zipcode').value = data.zonecode;
                  document.getElementById("addr1").value = addr + extraAddr;
                  // 커서를 상세주소 필드로 이동한다.
                  document.getElementById("addr2").value = "";
                  document.getElementById("addr2").focus();

                  // iframe을 넣은 element를 안보이게 한다.
                  // (autoClose:false 기능을 이용한다면, 아래 코드를 제거해야 화면에서 사라지지 않는다.)
                  element_wrap.style.display = 'none';

                  // 우편번호 찾기 화면이 보이기 이전으로 scroll 위치를 되돌린다.
                  document.body.scrollTop = currentScroll;
                },
                // 우편번호 찾기 화면 크기가 조정되었을때 실행할 코드를 작성하는 부분. iframe을 넣은 element의 높이값을 조정한다.
                onresize: function (size) {
                  element_wrap.style.height = size.height + 'px';
                },
                width: '100%',
                height: '100%'
              }).embed(element_wrap);

              // iframe을 넣은 element를 보이게 한다.
              element_wrap.style.display = 'block';
            }
          </script> 
				<!------//------->
                <div class="info_input_box mt_10">
                        <div class="data_title6">전체 동의</div>
                        <input id="agree1" type="checkbox" name="checkbox1" class="checkbox">
                        <label for="agree1"><span class="sub-text">(필수)</span> 이용약관 및 개인정보수집에 모두 동의합니다.</label>
                        <div class="info_box">
                            <h4>이용약관</h4>
                            <div class="info_box_cont">
                                <?php include "../_inc/guide_terms.php"; ?>
                            </div>
                            <input id="agree3" type="checkbox" name="checkbox3" class="checkbox">
                            <label for="agree3"><span class="sub-text">(필수)</span> 이용약관에 동의합니다.</label>
                            <h4 class="tit_top_line">개인정보 처리방침</h4>
                            <div class="info_box_cont">
                                <?php include "../_inc/guide_privacy.php"; ?>
                            </div>

                        </div>
                        <input id="agree4" type="checkbox" name="checkbox4" class="checkbox">
                        <label for="agree4"><span class="sub-text">(필수)</span> 개인정보 처리방침에 동의합니다.</label>
                    </div>
                    <!------//------->
                    <div class="sp_20"></div>
                    <div class="bottom_btnbox" style="display: block;">
                        <!-- <div id="oBtnCancel" class="rebtn01">취소 </div> -->
                        <div id="oBtnJoin" class="rebtn02">가입하기 </div>

                        
                    </div>
                </div>
            </form>
        </div>
    </div>
<!--//본문영역 --> 

<!--하단 js --> 
<script src="../js/ui_end.js" ></script> 

<!--하단 스크립트 : 상단 배너용 --> 
<script src='../js/card-slider/swiper-bundle.min.js'></script> 
<script  src="../js/card-slider/script.js"></script> 
<script>

var validId = false;
var validEmail = false;
$(function () {
    //아이디 검색    
    $("#oBtnIdCheck").on("click",function(){        
        var sUserId = $("#userId").val();
        if(!sUserId){
          //빈값체크
          alert("아이디를 입력 후 검색해주세요.");
          $("#userId").focus();
          return false;
        }else{
          // ***다른조건이 있으면 정규식 체크해야됨.
          if(id_check(sUserId)){
          //앞뒤 공백 전부 없애고 값 전달
          //중복체크
            $.ajax({
                url : "idcheck_ajax.php",
                type : "POST",
//                 async : false,
                dataType : 'json',
                data : {
                  'sUserId' : sUserId
                },
                error: function(xhr, status, error){
                  console.log("code:"+request.status+", message:"+request.responseText+", error:"+error);
                },
                success : function (oData) {
//                   var oData = JSON.parse(ret);
                    if (oData.res == "200") {
                      validId = true;
                    }
                    alert(oData.msg);
                }
            });
          }else{
 
            alert("아이디 형식에 맞게 입력해주세요 (6글자이상, 영어, 숫자만 가능)");
            return false;
          }
        }
    });

    //이메일 중복 검색    
    $("#oBtnEmailCheck").on("click",function(){        
        var sEmail = $("#email").val();
        if(!sEmail){
          //빈값체크
          alert("이메일을 입력 후 검색해주세요.");
          $("#userId").focus();
          return false;
        }else{
          // ***다른조건이 있으면 정규식 체크해야됨.
          if(email_check(sEmail)){
          //앞뒤 공백 전부 없애고 값 전달
          //중복체크
            $.ajax({
                url : "emailcheck_ajax.php",
                type : "POST",
//                 async : false,
                dataType : 'json',
                data : {
                  'sEmail' : sEmail
                },
                error: function(xhr, status, error){
                  console.log("code:"+request.status+", message:"+request.responseText+", error:"+error);
                },
                success : function (oData) {
//                   var oData = JSON.parse(ret);
                    if (oData.res == "200") {
                      validEmail = true;
                    }
                    alert(oData.msg);
                }
            });
          }else{
 
            alert("이메일 형식에 맞게 입력해주세요");
            return false;
          }
        }
    });

    $("#agree1").on("click",function(){
    	if($('#agree1').is(':checked')){
    		$('#agree3').prop('checked',true);
    		$('#agree4').prop('checked',true);
    	}else{
    		$('#agree3').prop('checked',false);
    		$('#agree4').prop('checked',false);
    	}
    });
    
    $("#agree3").on("click",function(){
    	if($('#agree3').is(':checked') && $('#agree4').is(':checked')){
    		$('#agree1').prop('checked',true);
    	}else{
    		$('#agree1').prop('checked',false);
    	}
    });
    
    $("#agree4").on("click",function(){
    	if($('#agree3').is(':checked') && $('#agree4').is(':checked')){
    		$('#agree1').prop('checked',true);
    	}else{
    		$('#agree1').prop('checked',false);
    	}
    });

    //회원가입 실행
    $("#oBtnJoin").on("click",function(){

	    // 아이디검증
	    if(!validId){
	  	alert("아이디 검색을 눌러주세요");
	      $("#userId").focus();
	      return false;
	    }

	    // 비밀번호
	    if(!$("#password").val()){
	  	  alert("비밀번호를 입력해주세요");
	      $("#password").focus();
	      return false;    
	    }
	
	    // 비밀번호통일
	    if(!$("#passwordChk").val()){
	  	  alert("비밀번호를 확인해주세요");
	      $("#passwordChk").focus();
	      return false;    
	    }else{
	      if($("#passwordChk").val()!=$("#password").val()){
	      	alert("비밀번호가 일치하지 않습니다");
	        $("#passwordChk").focus();
	        return false;    
	      }
	    }
	    
	    // 이름
	    if(!$("#name").val()){
	  	  alert("이름을 입력하세요");
	      $("#name").focus();
	      return false;        
	    }
	
	    // 이메일
	    if(!$("#email").val()){
	  	  alert("이메일을 입력하세요");
	      $("#email").focus();
	      return false;        
	    }else{
	  	  if(!email_check($("#email").val())){
	  		  alert("이메일을 양식으로 입력하세요");
	  	        $("#email").focus();
	  	        return false;        
	  	  }
	      //이메일정규식
	    }
	    // 아이디검증
	    if(!validEmail){
	  	alert("이메일 중복 확인을 눌러주세요");
	      $("#email").focus();
	      return false;
	    }
	
	    // 전화번호
	    if(!$("#phone").val()){
	  	  alert("전화번호를 입력하세요");
	      $("#phone").focus();
	      return false;        
	    }else{
	      //전화번호검증 하이푼없이
	    }
	
	
	    //사용자약관 체크박스
	    if(!$('#agree1').is(':checked')){
// 	      alert("서비스를 이용하기 위해서는 약관에 동의하셔야 합니다.");
// 	      return false;    
	    }
	    if(!$('#agree2').is(':checked')){
	      alert("서비스를 이용하기 위해서는 SMS을 통한 상품/이벤트 정보 수신에 동의하셔야 합니다.");
	      return false;    
	    }
	    if(!$('#agree3').is(':checked')){
	      alert("서비스를 이용하기 위해서는 이용약관에 동의하셔야 합니다.");
	      return false;    
	    }
	    if(!$('#agree4').is(':checked')){
	      alert("서비스를 이용하기 위해서는 개인정보 수집 및 이용동의 약관에 동의하셔야 합니다.");
	      return false;    
	    }
	    
	
	    var sFormData = $("#frmJoin").serialize();
	    
	    $.ajax({
	        url : "join_ajax.php",
	        type : "POST",
	        async : false,
	        data : sFormData,
	        error: function(xhr, status, error){
	          console.log("code:"+request.status+", message:"+request.responseText+", error:"+error);
	        },
	        success : function (ret) {
	          var oData = JSON.parse(ret);
	          console.log(oData);

			  if(mo_chk() == 'android') {
				// LC CP 광고 회원가입 추가
				JavascriptBridge.loginTnkCall();
			  }

	            if (oData.rst == "200") {
	              alert("가입이 완료되었습니다.");
	              location.href = "/front/main/index.php";
	            }
	              
	        }
	      })  
   
  });
  


    
});

function id_check(id){
    const reg = /^[a-z|0-9|]+$/;
	if(reg.test(id)){
		if(id.length > 5){
			return true;
		}else{
			return false;
		}
	}else{
		return false;
	}
}

function email_check(email) {
	var reg = /^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i;
	return reg.test(email);
}
function handleOnInput(e)  {
    // e.value = e.value.replace(/[^a-z1-9]/ig, '')
//     e.value = e.value.replace(/[^a-z0-9]/g, '')
    validId = false;
}
function handleOnInputE(e)  {
    // e.value = e.value.replace(/[^a-z1-9]/ig, '')
//     e.value = e.value.replace(/[^a-z0-9]/g, '')
    validEmail = false;
}

function mo_chk(){		
	var mobile = (/iphone|ipad|ipod|android/i.test(navigator.userAgent.toLowerCase()));	 

	if (mobile) {
		var userAgent = navigator.userAgent.toLowerCase();
		if (userAgent.search("android") > -1){
			return os = "android";
		}else if ((userAgent.search("iphone") > -1) || (userAgent.search("ipod") > -1) || (userAgent.search("ipad") > -1)){
			return os = "ios";
		}else{
			return os = "otehr";
		}
	} else {
		return os = "pc";		
	}
}	
</script>
</body>
</html>

